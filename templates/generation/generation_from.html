<style>
    .vline {
    {#height: 2px; /* Adjust the height as needed */#} width: inherit;
        margin-top: 5px;
        margin-bottom: 5px;
    }
</style>

<form id="generation-form">
    {% csrf_token %}

    <input type="hidden" id="datasetSelect" name="dataset" value="{{ dataset }}">


    {#    <h4 style="color:dimgrey;margin-top: 20px">Data Size#}
    {#        <hr class="vline">#}
    {#    </h4>#}
    <label for="generationLength">Size Seed Data</label>
    <div class="form-group " style="margin-left:0;margin-right:0">
        <select id="len_ts" class="form-control" name="len_ts"
                onchange="">
            <option value=1 selected> full</option>

            <option value=0 selected> as selected in chart</option>

        </select>
    </div>

    <label for="generationLength">Length New Series </label>
    <div class="form-group " style="margin-left:0;margin-right:0">
        <select id="len_ts" class="form-control" name="len_ts"
                onchange="">
            <option value={{ len_ts.0 }} selected style="display:none"> {{ len_ts.0 }}</option>
            {% for length in len_ts|slice:"1:" %}

                <option value={{ length }}>{{ length }}</option>
            {% endfor %}
        </select>
    </div>
    <label for="generationCount"># New Series</label>
    <div class="form-group " style="margin-left:0;margin-right:0">
        <select id="nb_ts" class="form-control" name="nb_ts"
                onchange="">
            <option value={{ nb_ts.0 }} selected style="display:none"> {{ nb_ts.0 }}</option>
            {% for count in nb_ts|slice:"1:" %}
                <option value={{ count }}>{{ count }}</option>
            {% endfor %}

        </select>
    </div>

    <div class="form-group">
        <button id="generationBtn" type="button" class="btn btn-primary form-control" onclick="">Generate</button>
    </div>


    {#    <h4 style="color:dimgrey;margin-top: 20px">Generation Quality#}
    {#        <hr class="vline">#}
    {#    </h4>#}
    {#    <div class="vline"></div>#}


    <label for="num_hashtables"># Hashtables</label>
    <div class="form-group " style="margin-left:0;margin-right:0">
        <select id="num_hashtables" class="form-control" name="num_hashtables"
                onchange="">
            <option value={{ num_hashtables.0 }} selected style="display:none"> {{ num_hashtables.0 }}</option>
            {% for count in num_hashtables|slice:"1:" %}
                <option value={{ count }}>{{ count }}</option>
            {% endfor %}

        </select>
    </div>
    <label for="generationCount">nb top</label>
    <div class="form-group " style="margin-left:0;margin-right:0">
        <select id="nb_top" class="form-control" name="nb_top"
                onchange="">
            <option value={{ nb_top.0 }} selected style="display:none"> {{ nb_top.0 }}</option>
            {% for count in nb_top|slice:"1:" %}
                <option value={{ count }}>{{ count }}</option>
            {% endfor %}

        </select>
    </div>
    <label for="generationCount">hash_length % </label>
    <div class="form-group " style="margin-left:0;margin-right:0">
        <select id="hash_length_percentage" class="form-control" name="hash_length_percentage"
                onchange="">
            <option value={{ hash_length_percentage.0 }} selected
                    style="display:none"> {{ hash_length_percentage.0 }}</option>
            {% for count in hash_length_percentage|slice:"1:" %}
                <option value={{ count }}>{{ count }}</option>
            {% endfor %}

        </select>
    </div>
    <div class="form-group">
        <button id="updateGenerationBtn" type="button" class="btn btn-primary form-control disabled" onclick="">Update
        </button>
    </div>
</form>


<script>
    var url = "{% url 'generation' dataset=dataset %}";
    console.log(url)

    function select_dataset() {
        var form = $('#generation-form');
        var data = form.serialize() + "&generate=false";
        return $.ajax({
            url: url,
            type: 'POST',
            data: data,
            success: function (data) {
                console.log(data)
            }
        });
    }


    function getGeneratedDatasets() {
        showLoadingGif()
        $('#generationBtn').addClass("disabled")
        $('#updateGenerationBtn').addClass("disabled")

        var form = $('#generation-form');
        let {min, max} = getRange()
        var data = form.serialize() + "&generate=true&min=" + min + "&max=" + max;
        return $.ajax({
            url: url,
            type: 'POST',
            data: data,
            success: function (data) {
            }
        });
    }

</script>
