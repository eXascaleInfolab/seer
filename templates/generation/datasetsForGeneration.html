{% extends "base.html" %}

{% block content %}
    <div class="page-header">
        <h2>Datasets</h2>
    </div>
    <h3>Existing</h3>
    <table class="table">
        <tbody>
        <tr>
            <th>Title</th>
            <th>Source</th>
            <th>Description</th>

            <th style="text-align: right">Time Series</th>
            <th style="text-align: right">Values</th>

        </tr>

        {% for id, dataset in original_data_sets.items %}
            <tr>
                <td>
                    <a href="{% url "generation" dataset=id %}">
                        {{ dataset.title }}
                    </a>
                </td>
                <td>{{ dataset.description }}</td>

                <td> {{ dataset.source }} <a href="{{ dataset.link }}"><span
                        class="glyphicon glyphicon-link" aria-hidden="true"></span></a></td>
                <td style="text-align: right">{{ dataset.stations }}</td>
                <td style="text-align: right">{{ dataset.datapoints }}</td>

                {#                <td style="text-align: right">{{ dataset.datapoints }}</td>#}
                {##}


            </tr>
        {% endfor %}
        </tbody>
    </table>

    <h3>New Datasets
        <h4>
            <button id="descr-show" type="button" class="btn btn-default btn-xs">
                <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> show description
            </button>
            <button style="display: none;" id="descr-hide" type="button" class="btn btn-default btn-xs">
                <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> hide description
            </button>
        </h4>
    </h3>


    <div style="display:none;" id="descr-options">
        <p>The required Files are:</p>
        <ul>
            <li>original.txt: File with the original series, add a header to the file to display column names.</li>
            <li>synthetic.txt: As provided by TSM-BENCH.</li>
        </ul>
    </div>

    <script>
        $(document).ready(function () {
            $('#descr-show').click(function () {
                $('#descr-options').show();
                $('#descr-show').hide();
                $('#descr-hide').show();
            });
            $('#descr-hide').click(function () {
                $('#descr-options').hide();
                $('#descr-show').show();
                $('#descr-hide').hide();
            });
        });
    </script>

    <form action="{% url 'upload_datasets' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}


        <!-- File Upload for Original CSV -->
        <div>
            {#            <label for="original_csv">Upload Original Dataset:</label>#}
            <input type="file" id="files" name="files" label="test" multiple><br><br>
            {#            <input type="file" id="original_csv" name="original_csv" accept=".txt">#}
        </div>
        <!-- specify title -->
        <div style="margin-top:-25px">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required>

            <label for="description">Description:</label>
            <input type="text" id="description" name="description" value="">

            <label for="url">url:</label>
            <input type="text" id="url" name="url" value="">

            <label for="source">Source:</label>
            <input type="text" id="source" name="source" value="">
        </div>

        <button style="margin-top:15px" type="submit">Submit</button>
    </form>

{% endblock %}
